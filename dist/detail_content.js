(()=>{"use strict";var t={535:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function l(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const l=i(n(613));let c;function s(t){return a(this,void 0,void 0,(function*(){let e=null,n=[];const r=t.querySelector("h3.gs_rt a");(null==r?void 0:r.textContent)&&(e=r.textContent.trim());const o=t.querySelector("div.gs_a");if(null==o?void 0:o.textContent){const t=o.textContent.trim();n=/^(.*?)(?:\s*-\s*.*)?(\.{3})?$/.exec(t)[1].split(",").map((t=>t.trim().replace(/[^\w\s]*$/,"")))}if(e&&n.length>0){const t={title:e,authorNames:n};localStorage.setItem("targetPaper",JSON.stringify(t))}}))}function u(t,e){!function(t){a(this,void 0,void 0,(function*(){localStorage.setItem("navigationType",JSON.stringify(t))}))}(e),window.location.href=t}document.addEventListener("click",(function(t){let e=t.target;const n=e.closest(".gs_r.gs_or.gs_scl"),r=e.closest(".gs_a a"),o=(e.closest(".gs_rt2"),e.closest(".gs_fl.gs_flb"));let i=null,a=null;if(o){const r=o.querySelectorAll("a");r.length>=4&&(i=r[2],a=r[3]),i===e&&(t.preventDefault(),t.stopPropagation(),s(n),u(i.getAttribute("href")||"",l.NavigationPath.CitedBy)),a===e&&(t.preventDefault(),t.stopPropagation(),s(n),u(a.getAttribute("href")||"",l.NavigationPath.Related))}r&&r.getAttribute("href")&&(t.preventDefault(),s(n),u(r.getAttribute("href")||"",l.NavigationPath.AuthorDetail))})),window.addEventListener("load",(()=>{const t=JSON.parse(localStorage.getItem("navigationType")||"null"),e=localStorage.getItem("targetPaper");let n,r=new URL(window.location.href).searchParams.get("start");if(n=r?Math.floor(parseInt(r)/10)+1:1,t===l.NavigationPath.CitedBy&&e){const t=JSON.parse(e);c={eventType:"cited-by",targetPaper:t,pagination:n}}if(t===l.NavigationPath.Related&&e){const t=JSON.parse(e);c={eventType:"related-article",targetPaper:t,pagination:n}}!function(){const t=[];document.querySelectorAll(".gs_r.gs_or.gs_scl").forEach((e=>{let n=null,r=[];const o=e.querySelector("h3.gs_rt a");(null==o?void 0:o.textContent)&&(n=o.textContent.trim());const i=e.querySelector("div.gs_a");if(null==i?void 0:i.textContent){const t=i.textContent.trim();r=/^(.*?)(?:\s*-\s*.*)?(\.{3})?$/.exec(t)[1].split(",").map((t=>t.trim().replace(/[^\w\s]*$/,"")))}if(n&&r.length>0){const e={title:n,authorNames:r};t.push(e)}})),function(t,e){const n={context:t,result:e};var r;console.log(n),chrome.storage.local.set({SearchEvent:JSON.stringify(n)}),r=n,chrome.runtime.sendMessage({type:"SearchEventChange",event:r},(t=>{}))}(c,{paperEntries:t})}()}))},613:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.NavigationPath=void 0,function(t){t.KeywordSearch="keywordSearch",t.AuthorDetail="authorElement",t.AuthorProfile="profileElement",t.CitedBy="citedByAnchor",t.Related="relatedArticleAnchor"}(n||(e.NavigationPath=n={}))}},e={};!function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}(535)})();